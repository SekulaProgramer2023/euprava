<nav class="navbar">
  <div class="navbar-left">
    <img src="https://www.scns.rs/wp-content/uploads/2024/03/SC-Novi-Sad-logo-horizontalni.png" alt="Logo" class="logo"
    (click)="goHome()"
    style="cursor: pointer;">
  </div>

  <div class="navbar-center">
    <span class="navbar-title">Studentski domovi</span>
  </div>

  <div class="navbar-right">
    <div class="profile-container" (click)="toggleDropdown()">
      <img src="https://static.vecteezy.com/system/resources/previews/005/544/718/non_2x/profile-icon-design-free-vector.jpg" alt="Profil" class="profile-pic">
      
      <!-- Dropdown meni -->
      <div class="dropdown-menu" *ngIf="dropdownOpen">
        <button (click)="goToProfile($event)">Profile</button>
        <button (click)="logout($event)">Logout</button>
      </div>
    </div>
  </div>
</nav>


<div *ngIf="user; else noUser" class="profile-container">
  <div class="profile-card">
    <div class="profile-header">
      <img src="https://static.vecteezy.com/system/resources/previews/005/544/718/non_2x/profile-icon-design-free-vector.jpg" 
           alt="Profil" class="profile-avatar">
      <h2>{{ user.name }} {{ user.surname }}</h2>
      <p class="profile-email">{{ user.email }}</p>
    </div>

    <div class="profile-info">
      <p><strong>Ime:</strong> {{ user.name }}</p>
      <p><strong>Prezime:</strong> {{ user.surname }}</p>
      <p><strong>Email:</strong> {{ user.email }}</p>
      <p><strong>Uloga:</strong> {{ user.role }}</p>
      <!-- Alergije -->
<div *ngIf="user" class="user-list-card">
  <h3>Alergije</h3>
  <ul>
    <li *ngFor="let a of user.alergije">{{ a }}</li>
  </ul>
  <div class="input-group">
    <input type="text" placeholder="Dodaj alergiju" [(ngModel)]="newAlergija">
    <button (click)="addAlergija()">Dodaj</button>
  </div>
</div>

<div *ngIf="user" class="user-list-card">
  <h3>Omiljena jela</h3>
  <ul>
    <li *ngFor="let j of user.omiljenaJela">{{ j }}</li>
  </ul>
  <div class="input-group">
    <select [(ngModel)]="newOmiljenoJelo">
      <option value="" disabled selected>Izaberi jelo</option>
      <option *ngFor="let jelo of allJela" [value]="jelo.naziv">{{ jelo.naziv }}</option>
    </select>
    <button (click)="addOmiljenoJelo()">Dodaj</button>
  </div>
</div>

    </div>
  </div>
</div>

<<div class="dogadjaji-section" *ngIf="dogadjaji.length > 0">
  <h3>Događaji na čekanju</h3>
  <ul>
    <li *ngFor="let d of dogadjaji">
      <div>
        <strong>{{ d.naziv }}</strong> - {{ d.opis }} - <b>{{d.tema}}</b>
      </div>
      <div>
        <button (click)="updateStatus(d.id, 'prihvaćen')">Prihvati</button>
        <button (click)="updateStatus(d.id, 'odbijen')">Odbij</button>
      </div>
    </li>
  </ul>
</div>

<div *ngIf="dogadjaji.length === 0" class="no-events">
  <p>Nema događaja na čekanju.</p>
</div>



<ng-template #noUser>
  <p>Korisnik nije učitan.</p>
</ng-template>

